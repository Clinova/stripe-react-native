{"version":3,"sources":["functions.ts"],"names":["APPLE_PAY_NOT_SUPPORTED_MESSAGE","createPaymentMethod","data","options","NativeStripeSdk","paymentMethod","error","createToken","params","token","retrievePaymentIntent","clientSecret","paymentIntent","retrieveSetupIntent","setupIntent","confirmPayment","paymentIntentClientSecret","isApplePaySupported","isiOS","presentApplePay","code","ApplePayError","Canceled","message","shippingContact","updateApplePaySummaryItems","summaryItems","errorAddressFields","confirmApplePayPayment","handleCardAction","confirmSetupIntent","createTokenForCVCUpdate","cvc","tokenId","handleURLCallback","url","stripeHandled","initPaymentSheet","paymentOption","presentPaymentSheet","confirmPaymentSheetPayment","initGooglePay","presentGooglePay","createGooglePayPaymentMethod","openApplePaySetup"],"mappings":"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","sourcesContent":["import { createError, isiOS } from './helpers';\nimport NativeStripeSdk from './NativeStripeSdk';\nimport {\n  ApplePay,\n  ApplePayError,\n  ApplePayResult,\n  ConfirmPaymentResult,\n  ConfirmPaymentSheetPaymentResult,\n  ConfirmSetupIntent,\n  ConfirmSetupIntentResult,\n  CreatePaymentMethodResult,\n  CreateTokenForCVCUpdateResult,\n  CreateTokenResult,\n  GooglePayInitResult,\n  HandleCardActionResult,\n  InitPaymentSheetResult,\n  PaymentMethodCreateParams,\n  PaymentSheet,\n  PayWithGooglePayResult,\n  PresentPaymentSheetResult,\n  RetrievePaymentIntentResult,\n  RetrieveSetupIntentResult,\n  StripeError,\n  GooglePay,\n  CreateGooglePayPaymentMethodResult,\n  OpenApplePaySetupResult,\n} from './types';\nimport type { Card } from './types/Card';\n\nconst APPLE_PAY_NOT_SUPPORTED_MESSAGE =\n  'Apple pay is not supported on this device';\n\nexport const createPaymentMethod = async (\n  data: PaymentMethodCreateParams.Params,\n  options: PaymentMethodCreateParams.Options = {}\n): Promise<CreatePaymentMethodResult> => {\n  try {\n    const { paymentMethod, error } = await NativeStripeSdk.createPaymentMethod(\n      data,\n      options\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentMethod: paymentMethod!,\n    };\n  } catch (error) {\n    return {\n      error,\n    };\n  }\n};\n\nexport const createToken = async (\n  params: Card.CreateTokenParams\n): Promise<CreateTokenResult> => {\n  try {\n    const { token, error } = await NativeStripeSdk.createToken(params);\n\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      token: token!,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const retrievePaymentIntent = async (\n  clientSecret: string\n): Promise<RetrievePaymentIntentResult> => {\n  try {\n    const { paymentIntent, error } =\n      await NativeStripeSdk.retrievePaymentIntent(clientSecret);\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentIntent: paymentIntent!,\n    };\n  } catch (error) {\n    return {\n      error,\n    };\n  }\n};\n\nexport const retrieveSetupIntent = async (\n  clientSecret: string\n): Promise<RetrieveSetupIntentResult> => {\n  try {\n    const { setupIntent, error } = await NativeStripeSdk.retrieveSetupIntent(\n      clientSecret\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      setupIntent: setupIntent!,\n    };\n  } catch (error) {\n    return {\n      error,\n    };\n  }\n};\n\nexport const confirmPayment = async (\n  paymentIntentClientSecret: string,\n  data: PaymentMethodCreateParams.Params,\n  options: PaymentMethodCreateParams.Options = {}\n): Promise<ConfirmPaymentResult> => {\n  try {\n    const { paymentIntent, error } = await NativeStripeSdk.confirmPayment(\n      paymentIntentClientSecret,\n      data,\n      options\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentIntent: paymentIntent!,\n    };\n  } catch (error) {\n    return {\n      error,\n    };\n  }\n};\n\nexport const isApplePaySupported = async (): Promise<boolean> => {\n  return isiOS && (await NativeStripeSdk.isApplePaySupported());\n};\n\nexport const presentApplePay = async (\n  params: ApplePay.PresentParams\n): Promise<ApplePayResult> => {\n  if (!(await NativeStripeSdk.isApplePaySupported())) {\n    return {\n      error: createError({\n        code: ApplePayError.Canceled,\n        message: APPLE_PAY_NOT_SUPPORTED_MESSAGE,\n      }),\n    };\n  }\n\n  try {\n    const { paymentMethod, shippingContact, error } = await NativeStripeSdk.presentApplePay(\n      params\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return { paymentMethod: paymentMethod!, shippingContact: shippingContact! };\n  } catch (error) {\n    return {\n      error,\n    };\n  }\n};\n\nexport const updateApplePaySummaryItems = async (\n  summaryItems: ApplePay.CartSummaryItem[],\n  errorAddressFields: Array<{\n    field: ApplePay.AddressFields;\n    message?: string;\n  }> = []\n): Promise<{ error?: StripeError<ApplePayError> }> => {\n  if (!(await NativeStripeSdk.isApplePaySupported())) {\n    return {\n      error: createError({\n        code: ApplePayError.Canceled,\n        message: APPLE_PAY_NOT_SUPPORTED_MESSAGE,\n      }),\n    };\n  }\n\n  try {\n    await NativeStripeSdk.updateApplePaySummaryItems(\n      summaryItems,\n      errorAddressFields\n    );\n\n    return {};\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const confirmApplePayPayment = async (\n  clientSecret: string\n): Promise<{ error?: StripeError<ApplePayError> }> => {\n  if (!(await NativeStripeSdk.isApplePaySupported())) {\n    return {\n      error: createError({\n        code: ApplePayError.Canceled,\n        message: APPLE_PAY_NOT_SUPPORTED_MESSAGE,\n      }),\n    };\n  }\n  try {\n    await NativeStripeSdk.confirmApplePayPayment(clientSecret);\n    return {};\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const handleCardAction = async (\n  paymentIntentClientSecret: string\n): Promise<HandleCardActionResult> => {\n  try {\n    const { paymentIntent, error } = await NativeStripeSdk.handleCardAction(\n      paymentIntentClientSecret\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentIntent: paymentIntent!,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const confirmSetupIntent = async (\n  paymentIntentClientSecret: string,\n  data: ConfirmSetupIntent.Params,\n  options: ConfirmSetupIntent.Options = {}\n): Promise<ConfirmSetupIntentResult> => {\n  try {\n    const { setupIntent, error } = await NativeStripeSdk.confirmSetupIntent(\n      paymentIntentClientSecret,\n      data,\n      options\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      setupIntent: setupIntent!,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const createTokenForCVCUpdate = async (\n  cvc: string\n): Promise<CreateTokenForCVCUpdateResult> => {\n  try {\n    const { tokenId, error } = await NativeStripeSdk.createTokenForCVCUpdate(\n      cvc\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      tokenId: tokenId!,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const handleURLCallback = async (url: string): Promise<boolean> => {\n  const stripeHandled = await NativeStripeSdk.handleURLCallback(url);\n  return stripeHandled;\n};\n\nexport const initPaymentSheet = async (\n  params: PaymentSheet.SetupParams\n): Promise<InitPaymentSheetResult> => {\n  try {\n    const { paymentOption, error } = await NativeStripeSdk.initPaymentSheet(\n      params\n    );\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentOption,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const presentPaymentSheet =\n  async (): Promise<PresentPaymentSheetResult> => {\n    try {\n      const { paymentOption, error } =\n        await NativeStripeSdk.presentPaymentSheet();\n      if (error) {\n        return {\n          error,\n        };\n      }\n      return {\n        paymentOption: paymentOption,\n      };\n    } catch (error) {\n      return {\n        error: createError(error),\n      };\n    }\n  };\n\nexport const confirmPaymentSheetPayment =\n  async (): Promise<ConfirmPaymentSheetPaymentResult> => {\n    try {\n      const { error } = await NativeStripeSdk.confirmPaymentSheetPayment();\n      if (error) {\n        return {\n          error,\n        };\n      }\n      return {};\n    } catch (error) {\n      return {\n        error: createError(error),\n      };\n    }\n  };\n\nexport const initGooglePay = async (\n  params: GooglePay.InitParams\n): Promise<GooglePayInitResult> => {\n  try {\n    const { error } = await NativeStripeSdk.initGooglePay(params);\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {};\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const presentGooglePay = async (\n  params: GooglePay.SetupIntentParams\n): Promise<PayWithGooglePayResult> => {\n  try {\n    const { error } = await NativeStripeSdk.presentGooglePay(params);\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {};\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const createGooglePayPaymentMethod = async (\n  params: GooglePay.CreatePaymentMethodParams\n): Promise<CreateGooglePayPaymentMethodResult> => {\n  try {\n    const { error, paymentMethod } =\n      await NativeStripeSdk.createGooglePayPaymentMethod(params);\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {\n      paymentMethod: paymentMethod!,\n    };\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n\nexport const openApplePaySetup = async (): Promise<OpenApplePaySetupResult> => {\n  try {\n    const { error } = await NativeStripeSdk.openApplePaySetup();\n    if (error) {\n      return {\n        error,\n      };\n    }\n    return {};\n  } catch (error) {\n    return {\n      error: createError(error),\n    };\n  }\n};\n"]}